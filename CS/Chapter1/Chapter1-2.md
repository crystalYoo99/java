# 1장 운영체제
## 1.2 프로세스
> Keyword : 프로그램, 프로세스, 스레드, 

### 프로세스와 스레드
#### 프로그램
- 특정 작업을 수행하기 위한 명령어의 집합
- OS는 프로그램을 실행하면서 디스크에 저장된 데이터를 메모리로 로드

#### 프로세스
- 컴퓨터에서 실행 중인 하나의 프로그램
- OS로부터 독립된 메모리 영역(코드, 데이터, 스택, 힙)을 할당받음
- 다른 프로세스의 메모리 영역에 접근할 수 없다

#### 프로세스에 할당된 메모리 영역
![프로세스에 할당된 메모리 영역](./src/1_5.png)

#### 프로세스의 메모리 영역 구조
![프로세스의 메모리 영역 구조](./src/1_6.png)
- 스택(stack) : 지역 변수, 함수의 매개변수, 반환되는 주소 값 등이 저장. 높은 주소 값에서 낮은 주소 값으로 메모리가 할당(LIFO). 영역 크기는 컴파일 시 결정.
- 힙(heap) : 사용자에 의해 동작 메모리 할당이 일어나는 영역. 낮은 주소 값에서 높은 주소 값으로 메모리가 할당됨(FIFO). 영역 크기는 런타임 때 결정.
- 데이터(data) : 전역변수, 정적변수, 배열, 구조체 등이 저장. 세부적으로 BSS(초기화하지 않은 변수) 영역과 데이터 영역(초기화한 변수)으로 나뉨.
- 코드(code) : 실행할 코드가 기게어로 컴파일되어 저장되는 영역. 텍스트 영역이라고도 함.

#### 스택 오버플로 / 힙 오버플로
- 스택, 힙은 동적으로 메모리 할당이 가능해서 사이에 빈 메모리 공간 존재.
- 메모리 영역을 공유해서 서로의 영역을 침범하는 문제 발생.
- 스택 오버플로 : 스택 영역이 힙 영역 침범
- 힙 오버플로 : 힙 영역이 스택 영역 침범

#### 스레드
- 프로세스에서 실제로 실행되는 흐름의 단위
- 프로세스 안에 존재해서 프로세스의 메모리 공간을 이용함
- 지역변수를 저장하는 스택 영역을 할당 받는다
- 전역변수를 저장하는 힙 영역은 다른 스레드와 공유

### PCB (Process Control Block, 프로세스 제어 블록)
- OS는 프로세스 제어를 위해 프로세스 정보를 저장
- 프로세스의 현재 상태, 프로세스를 나타내는 고유의 PID(Process ID), 부모&자식 프로세스의 PID, PC, 프로세스의 우선순위, 메모리 제한 등 저장

### 프로세스의 생성 (fork() 함수)
- fork() 함수에는 함수를 호출한 프로세스를 복사하는 기능 있음
- 부모 프로세스 : 기존 프로세스 / 자식 프로세스 : 복사된 프로세스
- 부모 프로세스에서 fork() 호출 시 부모 프로세스는 자식 프로세스의 PID 값을, 자식 프로세스는 0을 반환

### 프로세스 상태도
![프로세스 상태도](./src/1_7.png)
- 생성 - 준비 - 대기 - 실행 - 종료
- 생성(new) : 프로세스가 PCB 갖고 있지만 OS로부터 승인 받기 전
- 준비(ready) : OS로부터 승인받은 후 준비 큐에서 CPU 할당 기다림
- 실행(running) : 프로세스가 CPU 할당받아 실행
- 대기(waiting) : 프로세스가 입출력이나 이벤트 발생을 기다려야 해서 CPU 사용 멈추고 기다림
- 종료(terminated) : 프로세스 실행을 종료

### 멀티 프로세스와 멀티 스레드
#### 동시성과 병렬성
- 동시성(concurrency) : 하나의 코어(싱글 코어)에서 여러 작업을 번갈아 가면서 처리하는 방식
  - 콘텍스트 스위칭 : 처리 중인 작업을 교체하는 것
- 병렬성(parallelism) : CPU가 여러 개(멀티 코어) 있어서 각 CPU에서 각 작업을 동시에 처리하는 방식

#### 멀티 프로세스
- 응용 프로그램 하나를 여러 프로세스로 구성하는 것
- 한 프로세스가 죽어도 다른 프로세스에 영향 주지 않음
- 응용 프로그램을 프로세스 하나로 구성하는 것보다 여러 개로 구성하는 것이 안정적
- 단점 : 시간과 메모리 공간을 많이 사용

#### 멀티 스레드
- 스레드를 여러 개 생성해서 스레드들이 각자 다른 작업을 처리
- 스레드 간에 힙, 데이터, 코드 영역 공유해서 오버헤드가 적게 발생.

### 콘텍스트 스위칭
#### 인터럽트
- CPU에서 프로세스를 처리하다가 입출력 관련 이벤트가 발생하거나 예외 상황이 발생할 때 이에 대응할 수 있게 CPU에 처리를 요청하는 것

#### 콘텍스트 스위칭
- 콘텍스트 : CPU가 처리하는 프로세스의 정보
- 멀티 프로세스 환경에서 CPU가 처리 중인 프로세스의 정보를 바꾸는 것

### 프로세스 동기화
#### 경쟁 상태
- 공유 자원에 동시에 접근해서 경쟁하는 상태

#### 임계 영역
- 공유 자원에 접근할 수 있고 접근 순서에 따라 결과가 달라지는 코드 영역
- 임계 영역에서 경쟁 상태가 발생하는 것을 방지하려면 여러 프로세스가 공유 자원에 접근해도 데이터의 일관성이 유지되도록 프로세스 동기화 해야 함

#### 뮤텍스
락을 가진 프로세스만이 공유자원에 접근할 수 있게 하는 방법

#### 세마포어
- 공유 자원에 접근할 수 있는 프로세스의 수를 정해 접근을 제어하는 방법
- 시그널링 메커니즘

### 교착 상태
#### 교착 상태
- 상호배제 기법 때문에 2개 이상의 프로세스가 각각 자원을 가지고 있으면서 서로의 자원을 요구하며 기다리는 상태

#### 교착 상태 발생 4가지 필요 충분 조건
- 상호배제 (mutual exclusion) : 하나의 공유 자원에 하나의 프로세스만 접근 가능
- 점유와 대기 (hold and wait) : 프로세스가 최소 하나의 자원을 점유하고 있는 상태에서 추가로 다른 프로세스에서 사용 중인 자원 점유를 위해 대기
- 비선점 (non-preemption) : 다른 프로세스에 할당된 자원을 뺏을 수 없다
- 환형 대기 (circular wait) : 프로세스가 자신의 자원을 점유하면서 앞이나 뒤에 있는 프로세스의 자원을 요구 

### 스레드 안전
멀티 스레드 환경에서 하나의 변수, 함수, 객체에 스레드 여러 개가 동시에 접근해도 문제 없음을 의미

### IPC (Inter Process Communication)
- 프로세스 간에 자원을 공유하는 방식
1. 공유 메모리 : 프로세스 간 공유 가능 메모리를 구성해서 자원을 공유하는 방식
2. 소켓 : 네트워크 소켓을 이용하는 프로세스 간 통신
3. 세마포어 : 접근하는 프로세스를 제어해 공유 자원 관리
4. 파이프 : FIFO 형태의 메모리인 파이프를 이용해서 프로세스 간 자원을 공유하는 방식
5. 메시지 큐 : FIFO 형태의 큐 자료구조로 프로세스 간 메시지 주고 받는 방식

### 좀비 프로세스와 고아 프로세스
- 좀비 프로세스 : 부모 프로세스가 자식 프로세스의 종료 상태를 회수하지 않았을 경우에 남겨진 자식 프로세스
- 고아 프로세스 : 부모 프로세스가 자식 프로세스보다 먼저 종료되는 경우에 자식 프로세스





## 1.3 스케줄링
## 1.4 메모리 관리 전략
## 1.5 가상 메모리
## 1.6 캐시 메모리
