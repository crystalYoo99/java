# Chapter 17. 리액티브 프로그래밍
> Keyword : 리액티브 프로그래밍, 리액티브 매니패스토, 리액티브 스트림, 플로 API, RxJava, 마블 다이어그램

## 17.1 리액티브 매니패스토
#### 리액티브 매니패스토
- 리액티브 애플리케이션과 시스템 개발의 핵심 원칙을 공식적으로 정의
1. 반응성 : 시스템은 가능한한 적정 시간 안에 반응한다. 반응성이 뒷받침되어야 사용성을 높일 수 있다
2. 회복성 : 장애 시에도 시스템의 반응성은 유지된다
3. 탄력성 : 다양한 작업 부하에도 시스템 반응성이 유지된다. 입력 속도가 바뀐다면 이들 입력 관련 서비스에 할당된 자원을 늘리거나 줄임으로 반응할 수 있다. 
4. 메시지 주도 : 컴포넌트 간의 약산 결합, 고립, 위치 투명성이 유지되도록 시스템은 비동기 메시지 전달에 의존한다
### 17.1.1 애플리케이션 수준의 리액티브
- 주요기능 : 비동기로 작업을 수행할 수 있다
- 리액티브 프레임워크와 라이브러리는 스레드를 퓨처, 액터, 일련의 콜백을 발생시키는 이벤트 루프 등과 공유하고 처리할 이벤트를 변환하고 관리
- 저 수준의 멀티스레드 문제를 직접 처리할 필요가 없어짐 (동기 블록, 데드락, 경쟁 조건 등)
- 리액티브 시스템을 만들려면 훌륭하게 설계된 리액티브 애플리케이션 집합이 서로 잘 조화를 이루게

### 17.1.2 시스템 수준의 리액티브
#### 리액티브 시스템
- 주요 속성 : 메시지 주도
- 여러 애플리케이션이 한 개의 일관적인, 회복할 수 있는 플랫폼을 구성할 수 있게 해주고 이들 애플리케이션 중 하나가 실패해도 전체 시스템은 계속 운영될 수 있도록 도와주는 소프트웨어 아키텍처
- 메시지는 정의된 하나의 목적지를 향함 / 이벤트를 관련 이벤트를 관찰하도록 등록한 컴포넌트가 수신
- 수신자와 발신자가 각각 수신 메시지, 발신 메시지와 결합하지 않도록 이들 메시지를 비동기로 처리
- 컴포넌트에서 발생한 장애를 고립시킴으로 문제가 주변의 다른 컴포넌트로 전파되면서 전체 시스템 장애로 이어지는 것을 막음으로 회복성을 제공
#### 리액티브 애플리케이션 vs. 리액티브 시스템
- 리액티브 애플리케이션 : 비교적 짧은 시간 동안만 유지되는 데이터 스트림에 기반한 연산을 수행하며 보통 이벤트 주도로 분류
- 리액티브 시스템 : 애플리케이션을 조립하고 상호소통을 조절

## 17.2 리액티브 스트림과 플로 API
#### 리액티브 프로그래밍
리액티브 스트림을 사용하는 프로그래밍
#### 리액티브 스트림
잠재적으로 무한의 비동기 데이터를 순서대로 그리고 블록하지 않는 역압력을 전제해 처리하는 표준 기술
#### 역압력
- 발행-구독 프로토콜에서 이벤트 스트림의 구독자가 발행자가 이벤트를 제공하는 속도보다 느린 속도로 이벤트를 소비하면서 문제가 발생하지 않도록 보장하는 장치
- 스트림 처리의 비동기적인 특성상 역압력 기능의 내장은 필수

### 17.2.1 Flow 클래스 소개
- java.util.concurrent.Flow
- 리액티브 프로그래밍을 제공하는 클래스
- 이 클래스는 정적 컴포넌트 하나를 포함하고 있으며 인스턴스화할 수 없다
- 프로그래밍 발행-구독 모델을 지원할 수 있도록 중첩된 인터페이스 네 개를 포함
#### Publisher / Subscriber / Subscription / Processor
- Publisher :  subscribe() / 항목을 발행. 자바의 함수형 인터페이스.
- Subscriber : onSubscribe(), onNext(), onError(), onComplete() / 한 개씩 또는 한 번에 여러 항목을 소비. Publisher가 발행한 이벤트의 리스너로 자신 등록 가능.
- Subscription : request(), cancel() / Publisher와 Subscriber 사이의 제어 흐름, 역압력을 관리
- Processor 인터페이스는 단지 Publisher와 Subscriber를 상속받을 뿐 아무 메서드도 추가하지 않는다
- Publisher는 수많은 일련의 이벤트를 제공할 수 있지만 Subscriber의 요구사항에 따라 역압력 기법에 의해 이벤트 제공 속도가 제한

### 17.2.2 첫번째 리액티브 애플리케이션 만들기
1. 간단한 도메인 모델 정의
2. Subscription : Subscriber가 요청할 때마다 해당 도시의 온도를 전송하도록 Subscription을 구현
3. Subscriber : 새 요소 얻을 때마다 Subscription이 전달한 온도를 출력하고 새 레포트를 요청하는 Subscriber 클래스 구현
4. Publisher : 리액티브 애플리케이션이 실제 동작할 수 있도록 Publisher를 만들고 TempSubscriber를 이용해 Publisher에 구독하도록 Main 클래스를 구현
### 17.2.3 Processor로 데이터 변환하기
- Processor는 Subscriber이며 동시에 Publisher
- Processor의 목적은 Publisher를 구독한 다음 수신한 데이터를 가공해 다시 제공하는 것

### 17.2.4 자바는 왜 플로 API 구현을 제공하지 않는가?
- 플로 API는 구현을 제공하지 않으므로 우리가 직접 인터페이스를 구현
- API를 만들 당시 Akka, RxJava 등 다양한 리액티브 스트림의 자바 코드 라이브러리가 이미 존재
- 서로 다른 이름규칙과 API를 사용했는데, 자바9 표준화과정에서 java.util.concurrent.Flow의 인터페이스를 기반으로 리액티브 개념을 구현하도록 진화

## 17.3 리액티브 라이브러리 RxJava 사용하기
### 17.3.1 Observable 만들고 사용하기
### 17.3.2 Observable을 변환하고 합치기

## 17.4 마치며

